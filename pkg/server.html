<!DOCTYPE html>
<html>
<head>
<title>Twister: server</title>
<link rel="stylesheet" href="../static/base.css" type="text/css"/> 
</head>
<body>
<div id="content"> 
<h1><a href="..">Twister</a>: server</h1>

<h4>Table Of Contents</h4>
<ul>
<li><a href="#package">Package</a>
<li><a href="#variables">Variables</a>
<li><a href="#Run">func Run</a>
<li><a href="#Server">type Server</a>
            <ul>
    <li><a href="#Server.Serve">func (*Server) Serve</a>
            </ul>
</ul>

<h2 id="package">Package</h2>

<p><code>import "github.com/garyburd/twister/server"</code></p>

<p>
The server package implements the HTTP protocol for a web server.
</p>



<h2 id="variables">Variables</h2>

<pre>
var (
 ErrBadRequestLine = os.NewError(&#34;could not parse request line&#34;)
)
</pre>

<h2 id="Run">func Run</h2>
<p><code>func Run(addr string, handler web.Handler)</code></p>
<p>
Run is a convenience function for running an HTTP server. Run listens on the
TCP address addr, initializes a server object and calls the server&#39;s Serve()
method to handle HTTP requests. Run logs a fatal error if it encounters an
error.
</p>
<p>
The Server object is initialized with the handler argument and listener. If
the application needs to set any other Server fields or if the application
needs to create the listener, then the application should directly create
the Server object and call the Serve() method.
</p>
<p>
The &#34;Hello World&#34; server using Run() is:
</p>
<pre>package main

import (
    &#34;github.com/garyburd/twister/web&#34;
    &#34;github.com/garyburd/twister/server&#34;
    &#34;io&#34;
)

func helloHandler(req *web.Request) {
    w := req.Respond(web.StatusOK, web.HeaderContentType, &#34;text/plain&#34;)
    io.WriteString(w, &#34;Hello, World!\n&#34;)
}

func main() {
    server.Run(&#34;:8080&#34;, web.NewRouter().Register(&#34;/&#34;, &#34;GET&#34;, helloHandler))
}
</pre>


<h2 id="Server">type Server</h2>
<p>
Server defines parameters for running an HTTP server.
</p>

<pre>type Server struct {
 // The server accepts incoming connections on this listener. The
 // application is required to set this field.
 Listener net.Listener

 // The server dispatches requests to this handler. The application is
 // required to set this field.
 Handler web.Handler

 // If true, then set the request URL protocol to HTTPS.
 Secure bool

 // Set request URL host to this string if host is not specified in the
 // request or headers.
 DefaultHost string

 // The net.Conn.SetReadTimeout value for new connections.
 ReadTimeout int64

 // The net.Conn.SetWriteTimeout value for new connections.
 WriteTimeout int64
}</pre>




    <h3 id="Server.Serve">func (*Server) Serve</h3>
    <p><code>func (s *Server) Serve() os.Error</code></p>
    <p>
Serve accepts incoming HTTP connections on s.Listener, creating a new
goroutine for each. The goroutines read requests and then call s.Handler to
respond to the request.
</p>
<p>
The &#34;Hello World&#34; server using Serve() is:
</p>
<pre>package main

import (
    &#34;github.com/garyburd/twister/web&#34;
    &#34;github.com/garyburd/twister/server&#34;
    &#34;io&#34;
    &#34;log&#34;
    &#34;net&#34;
)

func helloHandler(req *web.Request) {
    w := req.Respond(web.StatusOK, web.HeaderContentType, &#34;text/plain&#34;)
    io.WriteString(w, &#34;Hello, World!\n&#34;)
}

func main() {
    handler := web.NewRouter().Register(&#34;/&#34;, &#34;GET&#34;, helloHandler)
    listener, err := net.Listen(&#34;tcp&#34;, &#34;:8080&#34;)
    if err != nil {
        log.Fatal(&#34;Listen&#34;, err)
    }
    defer listener.Close()
    err = (&amp;server.Server{Listener: listener, Handler: handler}).Serve()
    if err != nil {
        log.Fatal(&#34;Server&#34;, err)
    }
}
</pre>


<hr>
This page was generated automatically from the source code. If you installed
Twister using <a href="http://golang.org/cmd/goinstall/">goinstall</a>, then
you can also view the source documentation with <a
href="http://golang.org/cmd/godoc/">godoc</a>.  
</div>
</body>
</html>
